{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [

        {
            "name": "finetune OF 230514",
            "type": "python",
            "request": "launch",
            "program": "/net/pulsar/home/koes/jok120/openfold/train_openfold.py",
            "console": "integratedTerminal",

            "args": [ // (train_data_dir, train_alignment_dir, template_mmcif_dir, outdir)
                "data/train_structs/combined_scnmin_structs0510_random10k/",
                "data/alignments/combined_scnmin_alignments0510_random10k/",
                "data/template_structs/roda_pdbs_snapshotted_flattened_do_not_overwrite/",
                "out/debug/vscodetest/",
                "2021-10-10",
                "--train_chain_data_cache_path=data/caches/chain_data_cache_rodasnapshot_clustered.json",
                "--template_release_dates_cache_path=data/caches/mmcif_cache_rodasnapshot.json",
                "--val_data_dir=data/validation/cameo/20220116/minimized/data_dir",
                "--val_alignment_dir=data/validation/cameo/20220116/minimized/alignments",
                "--obsolete_pdbs_file_path=data/obsolete_230310.dat",
                "--resume_from_ckpt=openfold/resources/openfold_params/initial_training.pt",
                "--deepspeed_config_path=deepspeed_config_jk03.json",
                "--replace_sampler_ddp=True",
                "--gpus=1",
                "--batch_size=1",
                "--accumulate_grad_batches=1",
                "--checkpoint_every_epoch",
                "--wandb",
                "--wandb_project=finetune-openfold-02",
                "--wandb_entity=koes-group",
                "--precision=bf16",
                "--resume_model_weights_only=True",
                "--train_epoch_len=1000",
                "--max_epochs=500",
                "--debug",
                "--add_struct_metrics",
                "--openmm_weight=0.01",
                "--openmm_activation=None",
                "--seed=0",
                "--debug",
                "--num_workers=1",
                "--write_pdbs",
                "--write_pdbs_every_n_steps=200",
                "--log_every_n_steps=1",
                "--config_preset=finetuning_sidechainnet",
                "--violation_loss_weight=1",
                "--scheduler_base_lr=0",
                "--scheduler_warmup_no_steps=1",
                "--scheduler_max_lr=5e-4",
                "--use_scn_pdb_names=True",
                "--use_scn_pdb_names_val=True",
                "--use_openmm=True",
                "--use_alphafold_sampling=True",
                "--experiment=vscode-debug",
                "--wandb_tags='omm,scnmin,omm-warmup,valmin,more-data'",
                "--wandb_note='3x more training data. Start from initial_training.pt. Valmin. OMM warmup over 1000 steps. Skips standard warmup. Early stopping.'",
                "--log_to_csv=False",
                "--openmm_squashed_loss=False",
                "--openmm_modified_sigmoid=5,1000000,300000,5",
                "--run_validate_first=False",
                "--auto_slurm_resubmit=False",
                "--use_openmm_warmup=True",
                "--openmm_warmup_steps=1000",
                "--early_stopping=True",
                "--min_delta=0",
                "--patience=7",
            ],
            // "justMyCode": true,
            "justMyCode": false,
            "env": {
                "CUDA_LAUNCH_BLOCKING": "1",
                // "CUDA_VISIBLE_DEVICES": "2",
                "WANDB_MODE": "offline"
            }
        },
        
        {
            "name": "finetune OF nonscn data v3",
            "type": "python",
            "request": "launch",
            "program": "/net/pulsar/home/koes/jok120/openfold/train_openfold.py",
            "console": "integratedTerminal",

            "args": [  // (train_data_dir, train_alignment_dir, template_mmcif_dir, outdir)
                "data/train_structs/roda_pdbs_snapshotted_flattened_do_not_overwrite/", // minimized scn files for training
                "data/alignments/random10k_links/", // ALIGN_DIR, before making index
                // "/scr/dbs/", // ALIGN_DIR, after making index; see --alignment_index_path
                "data/template_structs/roda_pdbs_snapshotted_flattened_do_not_overwrite/", // MMCIF_FILES
                "out/experiments/230310/", // OUT_DIR
                "2021-10-10",
                "--template_release_dates_cache_path=data/caches/mmcif_cache_rodasnapshot.json",
                "--train_chain_data_cache_path=data/caches/chain_data_cache_rodasnapshot_clustered.json",
                "--val_data_dir=data/validation/cameo/20220116/data_dir",
                "--val_alignment_dir=data/validation/cameo/20220116/alignments",
                "--obsolete_pdbs_file_path=data/obsolete_230310.dat",
                "--resume_from_ckpt=openfold/resources/openfold_params/initial_training.pt",
                "--gpus=1",
                "--checkpoint_every_epoch",
                "--wandb",
                "--wandb_project=finetune-openfold-02",
                "--wandb_entity=koes-group",
                "--precision=bf16",
                "--resume_model_weights_only=True",
                "--train_epoch_len=1000",
                "--max_epochs=500",
                "--debug",
                "--add_struct_metrics",
                "--openmm_weight=1",
                "--openmm_activation=None",
                "--seed=0",
                "--debug",
                "--num_workers=1",
                "--write_pdbs",
                "--write_pdbs_every_n_steps=100",
                "--log_every_n_steps=1",
                "--config_preset=finetuning_sidechainnet",
                // "--grad_clip_val=0.1",
                "--violation_loss_weight=0",
                "--scheduler_base_lr=0",
                "--scheduler_warmup_no_steps=200",
                // "--scheduler_max_lr=1e-6",
                "--scheduler_max_lr=5e-4",
                "--use_scn_pdb_names=False",
                "--use_openmm=False",
                "--use_alphafold_sampling=True",
                "--wandb_tags='baseline,nonscn,debug'",
                "--wandb_notes='debugging vscode'",
                "--experiment=debugvscode-baseline",
                "--batch_size=1",
                "--accumulate_grad_batches=32",
                "--num_sanity_val_steps=-1",
                // "--deepspeed_config_path=deepspeed_config_jk02.json"
            ],
            // "justMyCode": true,
            "justMyCode": false,
            "env": {
                "CUDA_LAUNCH_BLOCKING": "1",
                // "CUDA_VISIBLE_DEVICES": "2",
                "WANDB_MODE": "offline"
            }
        },
        {
            "name": "debug validation evaluation",
            "type": "python",
            "request": "launch",
            "program": "/net/pulsar/home/koes/jok120/openfold/train_openfold.py",
            "console": "integratedTerminal",

            "args": [
            "data/train_structs/scnmin_structs/",
            "data/alignments/scnmin_alignments/",
            "data/template_structs/roda_pdbs_snapshotted_flattened_do_not_overwrite/",
            "out/debug/230417/db1",
            "2021-10-10",
                "--train_chain_data_cache_path=data/caches/chain_data_cache_rodasnapshot_clustered.json",
                "--template_release_dates_cache_path=data/caches/mmcif_cache_rodasnapshot.json",
                "--val_data_dir=data/validation/cameo/20220116/minimized/data_dir",
                "--val_alignment_dir=data/validation/cameo/20220116/minimized/alignments",
                "--obsolete_pdbs_file_path=data/obsolete_230310.dat",
                "--resume_from_ckpt=openfold/resources/openfold_params/initial_training.pt",
                "--deepspeed_config_path=deepspeed_config_jk03.json",
                "--gpus=1",
                "--batch_size=1",
                "--accumulate_grad_batches=1",
                "--checkpoint_every_epoch",
                "--wandb",
                "--wandb_project=finetune-openfold-02",
                "--wandb_entity=koes-group",
                "--precision=bf16",
                "--resume_model_weights_only=True",
                "--train_epoch_len=1000",
                "--max_epochs=500",
                "--debug",
                "--add_struct_metrics",
                "--openmm_weight=1",
                "--openmm_activation=None",
                "--seed=0",
                "--debug",
                "--num_workers=1",
                "--write_pdbs",
                "--write_pdbs_every_n_steps=1",
                "--log_every_n_steps=1",
                "--config_preset=finetuning_sidechainnet_notemp",
                "--violation_loss_weight=1",
                "--scheduler_base_lr=0",
                "--scheduler_warmup_no_steps=500",
                "--scheduler_max_lr=5e-4",
                "--use_scn_pdb_names=True",
                "--use_scn_pdb_names_val=True",
                "--use_openmm=True",
                "--use_alphafold_sampling=True",
                "--experiment=eval-valmin-DEBUG",
                "--wandb_tags=\"eval,valmin,before,debug\"",
                "--wandb_note=\"eval on minimized validation set, initial_training.py\"",
                "--log_to_csv=True",
                "--openmm_squashed_loss=False",
                "--openmm_modified_sigmoid=5,1000000,300000,5",
                "--run_validate_first=True",
                "--auto_slurm_resubmit=False",
                "--use_openmm_warmup=True",
                "--openmm_warmup_steps=1000",
                "--trainer_mode=validate-val",
            
            ],
            // "justMyCode": true,
            "justMyCode": false,
            "env": {
                "CUDA_HOME": "/opt/cuda-11.5",
                // "CUDA_LAUNCH_BLOCKING": "1",
                // "CUDA_VISIBLE_DEVICES": "2",
                "WANDB_MODE": "offline"
            }
        },
        {
            "name": "finetune OF",
            "type": "python",
            "request": "launch",
            "program": "/scr/openfold/train_openfold.py",
            "console": "integratedTerminal",
            // "env": {
            //     "CUDA_LAUNCH_BLOCKING": "1",
            //     "CUDA_VISIBLE_DEVICES": "0"
            // },
            "args": [  // (train_data_dir, train_alignment_dir, template_mmcif_dir, outdir)
                "data/train_structs/pdb_files_for_scnmin/", // minimized scn files for training
                "data/alignments/scn_roda2/", // ALIGN_DIR, before making index
                // "/scr/dbs/", // ALIGN_DIR, after making index; see --alignment_index_path
                "data/template_structs/mmcif_files_for_scn/", // MMCIF_FILES
                "out/experiments/221212/out1", // OUT_DIR
                "2021-10-10",
                "--gpus=1",
                "--checkpoint_every_epoch",
                "--obsolete_pdbs_file_path=data/obsolete.dat",
                "--config_preset=finetuning_sidechainnet",
                "--wandb",
                "--wandb_project=finetune-openfold-01",
                "--wandb_entity=jonathanking",
                "--log_every_n_steps=1",
                "--resume_from_ckpt=openfold/resources/openfold_params/initial_training.pt",
                "--resume_model_weights_only=True",
                "--train_epoch_len=6",
                "--max_epochs=1",
                "--debug",
                "--use_openmm=True",
                "--add_struct_metrics",
                "--openmm_weight=1e-7",
                "--openmm_activation=None",
                // "--overfit_single_batch"
                "--use_scn_pdb_names",
                "--write_pdbs",
                "--write_pdbs_every_n_steps=3",
                "--seed=0",
                "--template_release_dates_cache_path=data/caches/mmcif_cache.json",
                "--deepspeed_config_path=deepspeed_config.json",
                "--train_chain_data_cache_path=data/caches/chain_data_cache.json",
                "--benchmark",
                "--num_workers=1",
                "--precision=bf16",
                "--alignment_index_path=data/alignment_index/super.index", // ALIGNMENT_INDEX
                "--wandb_notes='debugging vscode'",
                "--experiment=ftune-debugvscode",
            ],
            // "justMyCode": true,
            "justMyCode": false,
            "env": {
                "CUDA_LAUNCH_BLOCKING": "1",
                "CUDA_VISIBLE_DEVICES": "0"
            }
        },
        {
            "name": "finetune OF nonscn data",
            "type": "python",
            "request": "launch",
            "program": "/scr/openfold/train_openfold.py",
            "console": "integratedTerminal",

            "args": [  // (train_data_dir, train_alignment_dir, template_mmcif_dir, outdir)
                "/scr/alphafold_data/pdb_mmcif/mmcif_files_for_roda/", // minimized scn files for training
                "/scr/scn_roda2/", // ALIGN_DIR, before making index
                // "/scr/dbs/", // ALIGN_DIR, after making index; see --alignment_index_path
                "/scr/alphafold_data/pdb_mmcif/mmcif_files_for_roda/", // MMCIF_FILES
                "/scr/experiments/230208/out1", // OUT_DIR
                "2021-10-10",
                "--gpus=1",
                "--checkpoint_every_epoch",
                "--obsolete_pdbs_file_path=/scr/alphafold_data/pdb_mmcif/obsolete.dat",
                "--config_preset=finetuning_sidechainnet",
                "--wandb",
                "--wandb_project=finetune-openfold-01",
                "--wandb_entity=jonathanking",
                "--log_every_n_steps=1",
                "--resume_from_ckpt=/scr/openfold/openfold/resources/openfold_params/initial_training.pt",
                "--resume_model_weights_only=True",
                "--train_epoch_len=6",
                "--max_epochs=1",
                "--debug",
                "--use_openmm=False",
                "--add_struct_metrics",
                "--openmm_weight=1e-7",
                "--openmm_activation=None",
                // "--overfit_single_batch"
                // "--use_scn_pdb_names",
                "--write_pdbs",
                "--write_pdbs_every_n_steps=3",
                "--seed=0",
                "--template_release_dates_cache_path=mmcif_cache.json",
                "--train_chain_data_cache_path=chain_data_cache_roda.json",
                "--benchmark",
                "--num_workers=1",
                "--precision=32",
                // "--alignment_index_path=/scr/dbs/super.index", // ALIGNMENT_INDEX
                "--wandb_notes='debugging vscode'",
                "--experiment=ftune-debugvscode",
            ],
            // "justMyCode": true,
            "justMyCode": false,
            "env": {
                "CUDA_LAUNCH_BLOCKING": "1",
                "CUDA_VISIBLE_DEVICES": "0"
            }
        },
        {
            "name": "finetune OF nonscn data v2",
            "type": "python",
            "request": "launch",
            "program": "/net/pulsar/home/koes/jok120/openfold/train_openfold.py",
            "console": "integratedTerminal",

            "args": [  // (train_data_dir, train_alignment_dir, template_mmcif_dir, outdir)
                "data/train_structs/roda_pdbs_snapshotted_flattened_do_not_overwrite/", // minimized scn files for training
                "data/alignments/random10k_links/", // ALIGN_DIR, before making index
                // "/scr/dbs/", // ALIGN_DIR, after making index; see --alignment_index_path
                "data/template_structs/roda_pdbs_snapshotted_flattened_do_not_overwrite/", // MMCIF_FILES
                "out/experiments/230310/", // OUT_DIR
                "2021-10-10",
                "--template_release_dates_cache_path=data/caches/mmcif_cache_rodasnapshot.json",
                "--train_chain_data_cache_path=data/caches/chain_data_cache_rodasnapshot.json",
                "--obsolete_pdbs_file_path=data/obsolete.dat",
                "--resume_from_ckpt=openfold/resources/openfold_params/initial_training.pt",
                "--gpus=1",
                "--checkpoint_every_epoch",
                "--wandb",
                "--wandb_project=finetune-openfold-02",
                "--wandb_entity=koes-group",
                "--precision=32",
                "--resume_model_weights_only=True",
                "--train_epoch_len=1000",
                "--max_epochs=500",
                "--debug",
                "--add_struct_metrics",
                "--openmm_weight=1",
                "--openmm_activation=None",
                "--seed=0",
                "--debug",
                "--num_workers=5",
                "--write_pdbs",
                "--write_pdbs_every_n_steps=100",
                "--log_every_n_steps=1",
                "--config_preset=finetuning_sidechainnet",
                // "--grad_clip_val=0.1",
                "--violation_loss_weight=0",
                "--scheduler_base_lr=0",
                "--scheduler_warmup_no_steps=200",
                // "--scheduler_max_lr=1e-6",
                "--scheduler_max_lr=5e-4",
                "--use_scn_pdb_names=False",
                "--use_openmm=False",
                "--use_alphafold_sampling=False",
                "--wandb_tags='baseline,nonscn,debug'",
                "--wandb_notes='debugging vscode'",
                "--experiment=debugvscode-baseline",
            ],
            // "justMyCode": true,
            "justMyCode": false,
            "env": {
                "CUDA_LAUNCH_BLOCKING": "1",
                "CUDA_VISIBLE_DEVICES": "0"
            }
        },
        {
            "name": "generate template mmcif cache",
            "type": "python",
            "request": "launch",
            "program": "/scr/openfold/scripts/generate_mmcif_cache.py",
            "console": "integratedTerminal",
            "args": [
                "/scr/alphafold_data/pdb_mmcif/pdb_files_for_scnmin/", // minimized scn files for training
                "mmcif_cache.json", // ALIGN_DIR, before making index
                "--no_workers=16"
            
            ],
            "justMyCode": true,

        },
        {
            "name": "generate training chain data cache",
            "type": "python",
            "request": "launch",
            "program": "/scr/openfold/scripts/generate_chain_data_cache.py",
            "console": "integratedTerminal",
            "args": [
                "/scr/alphafold_data/pdb_mmcif/mmcif_files_for_roda/", // minimized scn files for training
                "chain_data_cache_test.json", // ALIGN_DIR, before making index
                "--no_workers=1"
            
            ],
            "justMyCode": true,

        },
        {
            "name": "Python: Current File",
            "type": "python",
            "request": "launch",
            "program": "${file}",
            "console": "integratedTerminal",
            "justMyCode": true
        }
    ]
}